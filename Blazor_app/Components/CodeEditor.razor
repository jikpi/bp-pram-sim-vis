@using Blazor_app.Services
@inject CodeEditorService codeEditor

<textarea @bind="inputText" rows="4" class="form-control"></textarea>

@code {
    private string inputText;

    protected override void OnInitialized()
    {
        inputText = codeEditor.Code;
        codeEditor.SaveCode += SaveText;
        codeEditor.CodeChanged += ChangedText;
    }

    private void SaveText()
    {
        codeEditor.Code = inputText;
    }

    private void ChangedText(string text)
    {
        inputText = text;
        StateHasChanged();
    }

    public void Dispose()
    {
        codeEditor.SaveCode -= SaveText;
        codeEditor.CodeChanged -= ChangedText;
    }
}
